{"version":3,"sources":["services/persons.js","components/Notification.js","components/Error.js","App.js","index.js"],"names":["baseUlr","axios","get","then","response","data","newObject","post","id","put","delete","Notification","message","className","FilterField","props","onChange","handler","Persons","persons","filter","deletePerson","setPersons","setNewName","map","person","name","toLowerCase","includes","slice","length","key","number","onClick","PersonForm","handleNameChange","handleNumberChange","type","addPerson","App","useState","newName","newNumber","setNewNumber","setFilter","setMessage","errorMessage","setErrorMessage","useEffect","personsService","initialPersons","Error","event","f","JSON","stringify","target","value","console","log","preventDefault","nameObject","contains","some","elem","window","confirm","updateThisPerson","updateObject","setTimeout","catch","error","concat","n","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.fca81f79.chunk.js","sourcesContent":["import axios from 'axios'\nconst baseUlr = '/api/persons'\n\nconst getAll = () => {\n  const request = axios.get(baseUlr)\n  return request.then(response => response.data)\n}\n\nconst create = newObject => {\n  const request = axios.post(baseUlr, newObject)\n  return request.then(response => response.data)\n}\n\nconst update = (id, newObject) => {\n  const request = axios.put(`${baseUlr}/${id}`, newObject)\n  return request.then(response => response.data)\n}\n\nconst remove = (id, newObject) => {\n  const request = axios.delete(`${baseUlr}/${id}`, newObject)\n  return request.then(response => response.data)\n}\n\nexport default { getAll, create, update, remove }","import React from 'react'\nimport './components.css'\n\nconst Notification = ({ message }) => {\n  if (message === null) {\n    return null\n  }\n\n  return (\n    <div className=\"message\">\n      {message}\n    </div>\n  )\n}\n\nexport default Notification","import React from 'react'\nimport './components.css'\n\nconst Notification = ({ message }) => {\n  if (message === null) {\n    return null\n  }\n\n  return (\n    <div className=\"message error\">\n      {message}\n    </div>\n  )\n}\n\nexport default Notification","import React, { useState, useEffect } from 'react'\nimport personsService from './services/persons'\nimport Notification from './components/Notification'\nimport Error from './components/Error'\n\nconst FilterField = (props) => {\n\n  return (\n    <div>\n      filter shown with\n      <input\n        onChange={props.handler}\n      />\n    </div>\n  )\n}\n\nconst Persons = ({ persons, filter, deletePerson, setPersons, setNewName }) => {\n  return (\n\n    <div>\n      {persons.map((person) => {\n\n        const nameLowerCase = person.name.toLowerCase()\n\n        if (nameLowerCase.includes(filter.slice(1, -1)) || filter.length === 3) {\n\n          return (\n            <div key={person.name}>\n              {person.name} {person.number} <button onClick={() => deletePerson(person.id)}>\n                delete\n              </button>\n            </div>\n          )\n        } else {\n          return (\n            <div key={person.name}></div>\n          )\n        }\n      })}\n    </div>\n\n  )\n}\n\nconst PersonForm = (props) => {\n\n  return (\n    <form>\n      <div>\n        name:\n          <input\n          onChange={props.handleNameChange}\n        />\n      </div>\n      <div>\n        number:\n          <input\n          onChange={props.handleNumberChange}\n        />\n      </div>\n      <div>\n        <button type=\"submit\" onClick={props.addPerson}>add</button>\n      </div>\n    </form>\n  )\n}\n\nconst App = () => {\n  const [persons, setPersons] = useState([])\n  const [newName, setNewName] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const [filter, setFilter] = useState('')\n  const [message, setMessage] = useState(null)\n  const [errorMessage, setErrorMessage] = useState(null)\n\n  useEffect(() => {\n    setPersons([])\n    personsService\n      .getAll()\n      .then(initialPersons => {\n        setPersons(initialPersons)\n        setNewName('')\n      })\n  }, [])\n\n  const handleNameChange = (event) => {\n    setNewName(event.target.value)\n  }\n\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value)\n  }\n\n  const handleFilterChange = (event) => {\n    const f = JSON.stringify(event.target.value.toLowerCase())\n    setFilter(f)\n    console.log(f);\n  }\n\n  const addPerson = (event) => {\n    event.preventDefault()\n    const nameObject = {\n      name: newName,\n      number: newNumber\n    }\n\n    const contains = persons.some(elem => {\n      return JSON.stringify(nameObject.name) === JSON.stringify(elem.name)\n    })\n\n    if (newName !== '' && !contains) {\n      personsService.create(nameObject)\n        .then(() => {\n          setPersons(persons.concat(nameObject))\n          setMessage(`Added ${nameObject.name}`)\n          setTimeout(() => {\n            setMessage(null)\n          }, 5000)\n\n        })\n        .catch(error => {\n          setErrorMessage(error.response.data)\n          setTimeout(() => {\n            setErrorMessage(null)\n          }, 5000)\n        })\n\n    } else if (contains) {\n      if (window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)) {\n\n        const updateThisPerson = persons.filter(person => person.name === newName)[0]\n        personsService.update(updateThisPerson.id, nameObject)\n          .then(() => {\n            const updateObject = {\n              ...nameObject,\n              id: updateThisPerson.id\n            }\n            setPersons(persons.map(person => person.name === updateObject.name ? person = updateObject : person))\n\n            setMessage(`Updated ${nameObject.name}`)\n            setTimeout(() => {\n              setMessage(null)\n            }, 5000)\n\n          }\n          )\n          .catch(error => {\n            setErrorMessage(`Information of ${nameObject.name} has already been removed from server`)\n            setTimeout(() => {\n              setErrorMessage(null)\n            }, 5000)\n            setPersons(persons.filter(person => person.id !== updateThisPerson.id))\n          })\n      }\n    }\n\n  }\n\n  const deletePerson = id => {\n    const name = persons.filter(person => person.id === id)[0].name\n\n    if (window.confirm(`Delete ${name}`))\n      personsService.remove(id)\n        .then(() => {\n          setPersons(persons.filter(n => n.id !== id))\n          setMessage(`Deleted ${name}`)\n          setTimeout(() => {\n            setMessage(null)\n          }, 5000)\n        }\n        )\n        .catch(error => {\n          setErrorMessage(`Information of ${name} has already been removed from server`)\n          setTimeout(() => {\n            setErrorMessage(null)\n          }, 5000)\n          setPersons(persons.filter(person => person.id !== id))\n        })\n\n  }\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n\n      <Error message={errorMessage} />\n      <Notification message={message} />\n\n      <FilterField handler={handleFilterChange} />\n\n      <h3>Add a new</h3>\n\n      <PersonForm\n        handleNameChange={handleNameChange}\n        handleNumberChange={handleNumberChange}\n        addPerson={addPerson} />\n\n      <h3>Numbers</h3>\n\n      <Persons\n        persons={persons}\n        filter={filter}\n        deletePerson={deletePerson} />\n    </div>\n  )\n\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n\n"],"sourceRoot":""}